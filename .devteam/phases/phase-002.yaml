phase_id: 2
description: "UX & Features: WhatsApp template, search layout, multi-select presence, speech labels, last-minute swap"
status: completed
features:
  - id: F040
    name: "Update default WhatsApp invitation template (i18n)"
    cr: CR-94
    status: completed
  - id: F041
    name: "Search fields fixed at top in Settings screens"
    cr: CR-96
    status: completed
  - id: F042
    name: "Multi-select for Reconhecendo a Presenca field"
    cr: CR-97
    status: completed
  - id: F043
    name: "Change speech labels from Orador to Discurso"
    cr: CR-99
    status: completed
  - id: F044
    name: "Read-only speaker field with last-minute swap"
    cr: CR-100
    status: completed
artifacts_produced:
  - "docs/specs/SPEC_F040_F044.yaml"
  - "docs/specs/SPEC_CONSOLIDATED.yaml"
  - "docs/arch/ARCH_M014.yaml"
  - "docs/arch/ARCH_CONSOLIDATED.yaml"
  - "docs/plans/PLAN_P014.yaml"
  - "docs/plans/PLAN_CONSOLIDATED.yaml"
  - "docs/code/CODE_LEDGER.yaml"
  - "docs/tests/TEST_CONSOLIDATED.yaml"
  - "docs/reviews/REVIEW_CONSOLIDATED.yaml"
  - "docs/qa/QA_PLAN_batch7_phase2.yaml"
  - "docs/qa/QA_CONSOLIDATED.yaml"
commits:
  - {hash: "88e7469", message: "feat(i18n): change speeches.speaker label from Orador/Speaker to Discurso/Speech (CR-99)"}
  - {hash: "390c518", message: "feat(whatsapp): add i18n default templates EN/ES and language param to buildWhatsAppUrl (CR-94)"}
  - {hash: "4ba9413", message: "feat(invite): pass ward language to buildWhatsAppUrl for i18n template selection (CR-94)"}
  - {hash: "694d188", message: "fix(members): ensure SearchInput stays fixed above scrollable FlatList (CR-96)"}
  - {hash: "3def318", message: "fix(topics): move SearchInput outside ScrollView to keep it fixed at top (CR-96)"}
  - {hash: "4a7b26b", message: "feat(actor): add multiSelect and selectedNames props to ActorSelector (CR-97)"}
  - {hash: "ea47454", message: "feat(agenda): add toggle multi-select for recognized_names field (CR-97)"}
  - {hash: "ba0c775", message: "feat(db): add speaker_1/2/3_override fields to sunday_agendas for last-minute swap (CR-100)"}
  - {hash: "5038cf4", message: "feat(agenda): rewrite SpeakerField with read-only display and inline override editing (CR-100)"}
  - {hash: "609a36a", message: "feat(presentation): use speaker override names in presentation mode cards (CR-100)"}
  - {hash: "9307718", message: "test(agenda): add speaker_override fields to makeAgenda test helper (CR-100)"}
  - {hash: "aadab00", message: "test(whatsapp): add tests for getDefaultTemplate and buildWhatsAppUrl language param (CR-94)"}
  - {hash: "8d6b6e9", message: "fix(tests): update agenda-actors tests for multi-select recognizing and SpeakerField override (CR-97, CR-100)"}
  - {hash: "5fc6ba7", message: "docs(ledger): update CODE_LEDGER with Batch 7 Phase 2 commits"}
  - {hash: "b640e5a", message: "fix(topics): restore original comment format for test compatibility (CR-96)"}
  - {hash: "278690b", message: "docs(ledger): add regression fix commits and Phase 2 test results to CODE_LEDGER"}
  - {hash: "52a2cf0", message: "test(batch7-phase2): add tests for F040, F041, F042, F043, F044"}
  - {hash: "13a4d1e", message: "docs(tests): update TEST_CONSOLIDATED with Batch 7 Phase 2 results (v6)"}
decisions:
  - "ADR-037: Multi-select no ActorSelector via props opcionais (backward compatible)"
  - "ADR-038: Speaker override como campos TEXT nullable na sunday_agendas"
  - "DD-32: Default WhatsApp template per ward language (fallback pt-BR)"
  - "DD-33: Settings search fixed at top, content scrolls below"
  - "DD-34: Multi-select toggle for recognized_names field"
  - "DD-35: i18n key speeches.speaker changed from Orador to Discurso"
  - "DD-36: Speaker override fields in sunday_agendas (nullable, null=use original)"
handoff_notes: "Projeto Batch 7 concluido. 10 CRs implementadas (CR-91 a CR-100) em 2 fases. Total: 2923/2923 tests passing. QA POST passed: 24/24 must_pass, 10/10 should_pass. 1 pending deploy: migration 014 (speaker override columns)."
