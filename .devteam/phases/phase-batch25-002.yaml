phase_id: 2
description: "Speeches tab (expanded/collapsed cards, prayer slots) + Invite management + WhatsApp templates"
status: completed
features:
  - id: F157
    name: "Managed Prayers - Phase 2"
    cr: CR-221
    status: completed
artifacts_produced:
  - docs/plans/PLAN_P045.yaml
  - docs/qa/QA_PLAN_010.yaml
commits:
  - {hash: "e5ee44e", message: "feat(speech-slot): add isPrayer prop to SpeechSlot component (CR-221, STEP-08)"}
  - {hash: "cfce38a", message: "feat(whatsapp): add default prayer template constants and getter (CR-221, STEP-16)"}
  - {hash: "02fe311", message: "feat(speeches): render prayer SpeechSlots when managePrayers enabled (CR-221, STEP-09)"}
  - {hash: "a8bfe76", message: "feat(sunday-card): add collapsed prayer lines and smart type change logic (CR-221, STEP-10)"}
  - {hash: "26b1d0e", message: "feat(invite): add prayer positions to InviteManagementSection (CR-221, STEP-14)"}
  - {hash: "b11002e", message: "feat(whatsapp-settings): add segmented control for prayer templates (CR-221, STEP-17)"}
  - {hash: "d84f5c3", message: "docs(code-ledger): update CODE_LEDGER for Phase 2 steps S08-S17"}
  - {hash: "00ed02d", message: "test(batch25): add 234 tests for F157 CR-221 Phase 2 (Steps 8-17)"}
  - {hash: "f1006c1", message: "fix(tests): update superseded assertions for Phase 2 code changes (R-2)"}
  - {hash: "ca1ed5b", message: "docs(code-ledger): add test and R-2 fix commits"}
decisions:
  - "ARCH_M044 covers all 3 phases, no new ARCH needed for Phase 2"
  - "PLAN_P045 created as Phase 2 subset of PLAN_P044 (Steps 8-10, 14, 16-17)"
  - "SundayTypeDropdown smart type change: position-aware deletion with dynamic confirmation dialogs"
  - "InviteManagementSection uses useWardManagePrayers hook directly instead of prop"
handoff_notes: "Phase 3 pending: Agenda tab integration (STEP-11, 12), Home tab (STEP-13), Tab layout (STEP-15), Presentation mode (STEP-19), Permissions (STEP-20), Regression (STEP-21), Comprehensive tests (STEP-22). Note: Sunday type change logic (STEP-18) was included in Phase 2 STEP-10. STEP-14 InviteManagement index.tsx changes are partial (managePrayers prop passed)."
