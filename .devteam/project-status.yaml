project:
  name: "Batch 25 - Orações Gerenciadas (CR-221)"
  type: feature_request
  created_at: "2026-02-23"
  user_request: |
    Funcionalidade de orações gerenciadas: permitir que orações de abertura e
    encerramento sejam designadas com o mesmo workflow de discursos (status,
    convites WhatsApp, push notifications). Funcionalidade optativa por ala
    via toggle em Configurações da Ala.

    Decisões confirmadas:
    - Remover campos de oração de sunday_agendas, usar tabela speeches com
      positions 0 (abertura) e 4 (encerramento)
    - Toggle manage_prayers na tabela wards (default false)
    - 2 templates WhatsApp separados (abertura e encerramento)
    - Toggle OFF: status "confirmed" por padrão, custom names permitidos,
      sem notifications, campo editável na agenda via PrayerSelector
    - Toggle ON: workflow completo (status/LED/invites/notifications),
      só membros, campo read-only na agenda com lápis → aba Discursos
    - Aba Discursos: "Discursos e Orações" quando ON
    - Card contraído: altura fixa 5 linhas, orações com "(Oração)" em itálico
    - Testemunho/Primária: mostram slots de oração na aba Discursos quando ON
    - Mudança de tipo: orações preservadas ao trocar para tipo com orações
    - Agenda contraído: "Orações Y/2" permanece, lê de speeches
    - Apresentação: sem mudanças
    - i18n: pt-BR, en, es

phases:
  total: 3
  current: 2
  summary:
    - phase: 1
      description: "Database migration + hooks + ward settings toggle + auto-create prayers"
      status: completed
    - phase: 2
      description: "Speeches tab (expanded/collapsed cards, prayer slots) + Invite management + WhatsApp templates"
      status: completed
    - phase: 3
      description: "Agenda tab integration + Home tab + Sunday type change logic + notifications + i18n"
      status: pending

current_phase:
  id: 2
  started_at: "2026-02-24"
  features: [F157]
  change_requests: [CR-221]
  current_agent: "none"
  current_step: "Phase 2 completed"

artifacts:
  spec_consolidated: "docs/specs/SPEC_CONSOLIDATED.yaml"
  arch_consolidated: "docs/arch/ARCH_CONSOLIDATED.yaml"
  plan_consolidated: "docs/plans/PLAN_CONSOLIDATED.yaml"
  code_ledger: "docs/code/CODE_LEDGER.yaml"
  test_consolidated: "docs/tests/TEST_CONSOLIDATED.yaml"
  review_consolidated: "docs/reviews/REVIEW_CONSOLIDATED.yaml"
  qa_consolidated: "docs/qa/QA_CONSOLIDATED.yaml"

pending_deploys: []
last_updated: "2026-02-24T04:30:00"
