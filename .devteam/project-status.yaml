project:
  name: "Batch 19 - Language control, Pianist/Conductor split, Optional 2nd speech, Home redesign, Navigation improvements"
  type: feature_request
  created_at: "2026-02-21"
  user_request: |
    14 pedidos agrupados:
    1. Controle de idioma separado app vs ala. Ala controla template WhatsApp e coleções de temas. App controla UI. Idioma da ala alterável por Bispado/Secretário, salvo na tabela wards. Idioma do app por usuário, salvo no banco. Ao trocar idioma da ala, reabilitar automaticamente coleções (Temas especiais, Força dos jovens, Princípios do evangelho) no novo idioma.
    2. Clear buttons (X) em todos os campos não-texto-livre e não-switch do card de agenda.
    3. Split ator Música em Pianista e Regente. Migração: todos Music→Pianista. Designações existentes de Regente mantêm ator.
    4. 2º discurso opcional via toggle por domingo. Default: ligado. Desligado: desabilita campos, apaga designações com confirmação, card contraído sem linha. Independente do toggle: '3º Discurso'→'Último Discurso', remover labels do card contraído.
    5. Speech read-only na agenda + botão lápis→aba Discursos.
    6. Rename 'Próximas Designações'→'Próximos Discursos' (i18n).
    7. Ícone lápis na tela de apresentação→aba Agenda.
    8. Botão play no card expandido da agenda→tela de apresentação.
    9. Home: card de agenda não-expansível abaixo do botão Iniciar + botão lápis. Botão Iniciar com ícone play.
    10. Rename aba 'Agenda'→'Agendas' (i18n).
    11. Home: cards de discursos não-expansíveis + botão lápis→aba Discursos.
    12. Alinhar ícones X de limpar designação com centro dos campos.
    13. Explorar suporte a fontes maiores do sistema (accessibility). Se fácil, implementar.
    14. Bug reset senha: Gmail→Safari mostra HTML como plain-text.

phases:
  total: 3
  current: 2
  summary:
    - phase: 1
      description: "Data model & architecture: language control, pianist/conductor split, optional 2nd speech, password reset bug (CR-178, CR-180, CR-181, CR-191)"
      status: completed
    - phase: 2
      description: "Card UI/UX: clear buttons, speech read-only in agenda, X alignment, rename labels, push notifications bug (CR-179, CR-182, CR-183, CR-187, CR-189, CR-192)"
      status: in_progress
    - phase: 3
      description: "Navigation & Home redesign: edit/play icons, Home agenda card, Home speeches non-expandable (CR-184, CR-185, CR-186, CR-188)"
      status: pending

current_phase:
  id: 2
  started_at: "2026-02-22"
  features: []
  change_requests: [CR-179, CR-182, CR-183, CR-187, CR-189, CR-192]
  current_agent: "none"
  current_step: "Phase 2 DONE"
  completed_steps:
    - "QA PRE validation (validated=true, QA_PLAN_batch19_phase2, 20 checks: 19 must_pass + 1 should_pass)"
    - "Requirements extraction (F120-F125, 39 ACs, 0 OQs, status=complete)"
    - "Architecture definition (ARCH_M033, ADR-081/082, 0 migrations, 0 Edge Functions)"
    - "Implementation plan (PLAN_P033, 6 steps, 39 ACs, 11 ECs, 100% coverage)"
    - "Code implementation (7 commits, 85 new tests, 4959/4959 passing, S01-S06 complete)"
    - "Testing (97 tests, 37/39 ACs, 11/11 ECs, verdict approved, 4971/4971 passing)"
    - "Code review iteration 1 (verdict: changes_required, 2 P1 + 2 P2)"
    - "Code fixes (2 commits, 2 new tests, 4 updated, 4973/4973 passing)"
    - "Code review iteration 2 (verdict: approved, all 4 issues fixed, chain intact)"
    - "QA POST validation (verdict: passed, 20/20 checks)"

artifacts:
  spec_consolidated: "docs/specs/SPEC_CONSOLIDATED.yaml"
  arch_consolidated: "docs/arch/ARCH_CONSOLIDATED.yaml"
  plan_consolidated: "docs/plans/PLAN_CONSOLIDATED.yaml"
  code_ledger: "docs/code/CODE_LEDGER.yaml"
  test_consolidated: "docs/tests/TEST_CONSOLIDATED.yaml"
  review_consolidated: "docs/reviews/REVIEW_CONSOLIDATED.yaml"
  qa_consolidated: "docs/qa/QA_CONSOLIDATED.yaml"

pending_deploys: []
last_updated: "2026-02-22"
