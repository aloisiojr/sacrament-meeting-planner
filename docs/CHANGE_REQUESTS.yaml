# CHANGE_REQUESTS.yaml
# Registro consolidado de todas as Change Requests do projeto
# Atualizado: 2026-02-19

metadata:
  project: Sacrament Meeting Planner
  total_crs: 208
  implemented: 206
  pending: 2
  last_updated: "2026-02-22"

change_requests:
  # ============================================================
  # BATCH 1 (CRs 1-10)
  # ============================================================
  - id: 1
    type: ui
    status: implemented
    batch: 1
    description: "Aba Home - Titulo 'Agenda da Reuniao Sacramental' quando botao Iniciar aparece"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR001"

  - id: 2
    type: bug
    status: implemented
    batch: 1
    description: "Ala criada em PT-BR mas UI apareceu em EN-US"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR001"

  - id: 3
    type: bug
    status: implemented
    batch: 1
    description: "Aba Home - Clique em 'Iniciar Reuniao Sacramental' retorna 'Nenhum resultado encontrado'"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR001"

  - id: 4
    type: bug
    status: implemented
    batch: 1
    description: "Card de domingo - Excecao mostra 'general_conference' ao inves de texto legivel"
    regression_of: null
    related_crs: [6]
    implemented_in: "PLAN_CR001"

  - id: 5
    type: bug
    status: implemented
    batch: 1
    description: "Card de domingo - Label de discursos errado, deve ser '1o Discurso' ao inves de 'VAGA 1o'"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR001"

  - id: 6
    type: bug_critical
    status: implemented
    batch: 1
    description: "Opcoes para domingo erradas - Lista correta: Domingo com Discursos, Reuniao de Testemunho, Conferencia Geral, Conferencia de Estaca, Conferencia de Ala, Reuniao Especial da Primaria, Outro"
    regression_of: null
    related_crs: [4, 7]
    implemented_in: "PLAN_CR001"

  - id: 7
    type: bug_critical
    status: implemented
    batch: 1
    description: "Opcao diferente de Domingo com Discursos selecionada continua mostrando discursos"
    regression_of: null
    related_crs: [6]
    implemented_in: "PLAN_CR001"

  - id: 8
    type: bug_critical
    status: implemented
    batch: 1
    description: "Aba Configuracoes - Em Temas, nao consigo scrollar a lista de colecoes"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR001"

  - id: 9
    type: bug
    status: implemented
    batch: 1
    description: "Entrar em item de configuracoes e clicar no botao Configuracoes de novo causa efeito visual estranho"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR001"

  - id: 10
    type: bug_critical
    status: implemented
    batch: 1
    description: "Botoes Tema e Sobre nao fazem nada"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR001"

  # ============================================================
  # BATCH 2 (CRs 11-30)
  # ============================================================
  - id: 11
    type: bug
    status: implemented
    batch: 2
    description: "Sempre que o expo go inicia, o idioma esta em ingles"
    regression_of: null
    related_crs: [2]
    implemented_in: "PLAN_CR002"

  - id: 12
    type: ui
    status: implemented
    batch: 2
    description: "Tela 'Modelo WhatsApp' - Renomear para 'Modelo de Convite pelo WhatsApp'"
    regression_of: null
    related_crs: [13, 14, 15, 16, 17]
    implemented_in: "PLAN_CR002"

  - id: 13
    type: bug
    status: implemented
    batch: 2
    description: "Tela 'Modelo WhatsApp' - {tema} nao e um placeholder, remover do template padrao"
    regression_of: null
    related_crs: [12, 14, 15, 16, 17]
    implemented_in: "PLAN_CR002"

  - id: 14
    type: feature
    status: implemented
    batch: 2
    description: "Tela 'Modelo WhatsApp' - Colocar template padrao especifico"
    regression_of: null
    related_crs: [12, 13, 15, 16, 17, 63]
    implemented_in: "PLAN_CR002"

  - id: 15
    type: feature
    status: implemented
    batch: 2
    description: "Tela 'Modelo WhatsApp' - Fazer placeholders clicaveis"
    regression_of: null
    related_crs: [12, 13, 14, 16, 17]
    implemented_in: "PLAN_CR002"

  - id: 16
    type: ui
    status: implemented
    batch: 2
    description: "Tela 'Modelo WhatsApp' - Usar melhor o espaco"
    regression_of: null
    related_crs: [12, 13, 14, 15, 17]
    implemented_in: "PLAN_CR002"

  - id: 17
    type: ui
    status: implemented
    batch: 2
    description: "Tela 'Modelo WhatsApp' - Colocar botao de voltar"
    regression_of: null
    related_crs: [12, 13, 14, 15, 16]
    implemented_in: "PLAN_CR002"

  - id: 18
    type: bug
    status: implemented
    batch: 2
    description: "Alteracao de 1o de marco para reuniao com discursos nao foi incluida no historico"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR002"

  - id: 19
    type: ui
    status: implemented
    batch: 2
    description: "Tela Historico esta sem botao voltar"
    regression_of: null
    related_crs: [33]
    implemented_in: "PLAN_CR002"

  - id: 20
    type: ui
    status: implemented
    batch: 2
    description: "Tela Temas esta sem botao voltar"
    regression_of: null
    related_crs: [33]
    implemented_in: "PLAN_CR002"

  - id: 21
    type: ui
    status: implemented
    batch: 2
    description: "Tela Temas - Botao de adicionar deve ficar dentro de Temas da Ala"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR002"

  - id: 22
    type: ui
    status: implemented
    batch: 2
    description: "Tela historico de atividades precisa ter textos mais legiveis"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR002"

  - id: 23
    type: bug
    status: implemented
    batch: 2
    description: "Secretario nao tem opcao para gerenciar usuarios do app"
    regression_of: null
    related_crs: [31, 37, 64]
    implemented_in: "PLAN_CR002"

  - id: 24
    type: bug_critical
    status: implemented
    batch: 2
    description: "Dropbox de selecao de domingos com excecao nao funciona"
    regression_of: null
    related_crs: [6]
    implemented_in: "PLAN_CR002"

  - id: 25
    type: bug
    status: implemented
    batch: 2
    description: "Ao clicar na aba Agenda pela primeira vez, o primeiro domingo e Jun do ano passado"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR002"

  - id: 26
    type: bug_critical
    status: implemented
    batch: 2
    description: "Solucao de atores esta toda errada - Redesign completo"
    regression_of: null
    related_crs: [34, 45, 71, 72, 73, 74]
    implemented_in: "PLAN_CR002"

  - id: 27
    type: bug_critical
    status: implemented
    batch: 2
    description: "Campo de texto come letras - Deixar campo de anuncios com 3 linhas"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR002"

  - id: 28
    type: ui
    status: implemented
    batch: 2
    description: "Card de agenda - Usar 2/3 de tela para dialogo de escolha de hinos"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR002"

  - id: 29
    type: ui
    status: implemented
    batch: 2
    description: "Card de Agenda - Trocar labels das secoes"
    regression_of: null
    related_crs: [49, 69]
    implemented_in: "PLAN_CR002"

  - id: 30
    type: ui
    status: implemented
    batch: 2
    description: "Card de Agenda - Trocar 'Numero musical' por 'Apresentacao especial'"
    regression_of: null
    related_crs: [49]
    implemented_in: "PLAN_CR002"

  # ============================================================
  # BATCH 3 (CRs 31-43)
  # ============================================================
  - id: 31
    type: spec_fix
    status: implemented
    batch: 3
    description: "Contradicao no SPEC.final.md sobre permissoes do Secretario"
    regression_of: null
    related_crs: [23, 37]
    implemented_in: "PLAN_CR003"

  - id: 32
    type: spec_fix
    status: implemented
    batch: 3
    description: "Tela 'Sobre' nao tem especificacao"
    regression_of: null
    related_crs: [10, 62]
    implemented_in: "PLAN_CR003"

  - id: 33
    type: spec_fix
    status: implemented
    batch: 3
    description: "Nao existe convencao global de botao de voltar"
    regression_of: null
    related_crs: [17, 19, 20]
    implemented_in: "PLAN_CR003"

  - id: 34
    type: spec_fix
    status: implemented
    batch: 3
    description: "RF-22 ainda descreve checkboxes de atores (CR-26 mudou)"
    regression_of: null
    related_crs: [26]
    implemented_in: "PLAN_CR003"

  - id: 35
    type: bug
    status: implemented
    batch: 3
    description: "Placeholder {duracao} listado mas coluna duration nao existe no DB"
    regression_of: null
    related_crs: [14]
    implemented_in: "PLAN_CR003"

  - id: 36
    type: spec_fix
    status: implemented
    batch: 3
    description: "Nao ha spec de debounce para auto-save"
    regression_of: null
    related_crs: [27]
    implemented_in: "PLAN_CR003"

  - id: 37
    type: spec_fix
    status: implemented
    batch: 3
    description: "SPEC.final.md nao reflete que Secretario tem acesso a usuarios"
    regression_of: null
    related_crs: [23, 31]
    implemented_in: "PLAN_CR003"

  - id: 38
    type: spec_fix
    status: implemented
    batch: 3
    description: "Formato de data no header do Modo Apresentacao nao especificado"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR003"

  - id: 39
    type: feature
    status: implemented
    batch: 3
    description: "Tela de Temas da Ala nao tem campo de busca/filtro"
    regression_of: null
    related_crs: [21]
    implemented_in: "PLAN_CR003"

  - id: 40
    type: spec_fix
    status: implemented
    batch: 3
    description: "Botao '+' de adicionar membro tem posicionamento diferente nos docs"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR003"

  - id: 41
    type: spec_fix
    status: implemented
    batch: 3
    description: "Seletor de fuso horario sem spec dedicada"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR003"

  - id: 42
    type: bug_critical
    status: implemented
    batch: 3
    description: "Exportar e importar CSV nao funcionam"
    regression_of: null
    related_crs: [54, 66, 77, 78]
    implemented_in: "PLAN_CR_batch3"

  - id: 43
    type: feature
    status: implemented
    batch: 3
    description: "Adicionar botao Sair na aba configuracoes"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR_batch3"

  # ============================================================
  # BATCH 4 (CRs 44-75)
  # ============================================================
  - id: 44
    type: arch_fix
    status: implemented
    batch: 4
    description: "ARCH_M002 com multiplos problemas documentais"
    regression_of: null
    related_crs: [45]
    implemented_in: "PLAN_CR4_F001"

  - id: 45
    type: arch_fix
    status: implemented
    batch: 4
    description: "ARCH_M002 lista ActorManagementScreen removida pelo CR-26"
    regression_of: null
    related_crs: [26, 44]
    implemented_in: "PLAN_CR4_F001"

  - id: 46
    type: arch_fix
    status: implemented
    batch: 4
    description: "ARCH_M006/M007 nao descrevem integracao"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR4_F001"

  - id: 47
    type: arch_fix
    status: implemented
    batch: 4
    description: "ARCH_M008 nao inclui sub-telas de Settings"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR4_F001"

  - id: 48
    type: arch_fix
    status: implemented
    batch: 4
    description: "ARCH_M004 nao documenta formatFullDate do Presentation Mode"
    regression_of: null
    related_crs: [38]
    implemented_in: "PLAN_CR4_F001"

  - id: 49
    type: spec_fix
    status: implemented
    batch: 4
    description: "PRODUCT_SPECIFICATION nao atualizado apos CRs 6, 26, 29, 30"
    regression_of: null
    related_crs: [6, 26, 29, 30]
    implemented_in: "PLAN_CR4_F001"

  - id: 50
    type: spec_fix
    status: implemented
    batch: 4
    description: "Correcoes docs-only de F025 podem nao ter sido executadas"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR4_F001"

  - id: 51
    type: feature
    status: implemented
    batch: 4
    description: "Script CLI pnpm import-hymns nao existe"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR4_F009"

  - id: 52
    type: bug_critical
    status: implemented
    batch: 4
    description: "useRealtimeSync, useConnection e OfflineBanner sao codigo morto"
    regression_of: null
    related_crs: [53]
    implemented_in: "PLAN_CR4_F003"

  - id: 53
    type: bug_critical
    status: implemented
    batch: 4
    description: "useNotifications e codigo morto, push nao funciona"
    regression_of: null
    related_crs: [52]
    implemented_in: "PLAN_CR4_F003"

  - id: 54
    type: bug
    status: implemented
    batch: 4
    description: "Export CSV mostra erro quando cancela share sheet - Import tem msg hardcoded em ingles"
    regression_of: null
    related_crs: [42, 66]
    implemented_in: "PLAN_CR4_F005"

  - id: 55
    type: bug
    status: implemented
    batch: 4
    description: "Members screen com canWrite=false, titulo descentralizado"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR4_F005"

  - id: 56
    type: bug_critical
    status: implemented
    batch: 4
    description: "Valor 'speeches' nao e persistido no DB (CHECK constraint + codigo filtra)"
    regression_of: null
    related_crs: [6, 68]
    implemented_in: "PLAN_CR4_F002"

  - id: 57
    type: bug_critical
    status: implemented
    batch: 4
    description: "17 mutations sem callback onError"
    regression_of: null
    related_crs: [58, 59, 60, 61]
    implemented_in: "PLAN_CR4_F004"

  - id: 58
    type: bug_critical
    status: implemented
    batch: 4
    description: "3 tabs nao verificam estado de erro (isError)"
    regression_of: null
    related_crs: [57, 59, 60, 61]
    implemented_in: "PLAN_CR4_F004"

  - id: 59
    type: bug
    status: implemented
    batch: 4
    description: "ErrorBoundary e funcoes usam strings hardcoded em ingles"
    regression_of: null
    related_crs: [57, 58, 60, 61]
    implemented_in: "PLAN_CR4_F004"

  - id: 60
    type: bug
    status: implemented
    batch: 4
    description: "Apenas 1 ErrorBoundary no root, crash derruba tudo"
    regression_of: null
    related_crs: [57, 58, 59, 61]
    implemented_in: "PLAN_CR4_F004"

  - id: 61
    type: bug
    status: implemented
    batch: 4
    description: "QueryClient sem error handlers globais, retry policy inadequada"
    regression_of: null
    related_crs: [57, 58, 59, 60]
    implemented_in: "PLAN_CR4_F004"

  - id: 62
    type: feature
    status: implemented
    batch: 4
    description: "No 'Sobre', adicionar disclaimer e nome correto"
    regression_of: null
    related_crs: [10, 32]
    implemented_in: "PLAN_CR4_F006"

  - id: 63
    type: bug
    status: implemented
    batch: 4
    description: "Template padrao do CR-14 nao respeitado"
    regression_of: null
    related_crs: [14]
    implemented_in: "PLAN_CR4_F006"

  - id: 64
    type: bug
    status: implemented
    batch: 4
    description: "Secretario clica em Usuarios e aparece erro vermelho"
    regression_of: null
    related_crs: [23, 76]
    implemented_in: "PLAN_CR4_F007"

  - id: 65
    type: ux
    status: implemented
    batch: 4
    description: "Toggle de temas demora para ativar"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR4_F006"

  - id: 66
    type: bug
    status: implemented
    batch: 4
    description: "Exportar CSV nao faz nada com lista vazia, importar retorna erro"
    regression_of: null
    related_crs: [42, 54, 77, 78]
    implemented_in: "PLAN_CR4_F005"

  - id: 67
    type: feature
    status: implemented
    batch: 4
    description: "Implementar 'Esqueci a senha'"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR4_F007"

  - id: 68
    type: bug
    status: implemented
    batch: 4
    description: "Domingo com discursos, selecao volta para opcao antiga"
    regression_of: null
    related_crs: [6, 56]
    implemented_in: "PLAN_CR4_F002"

  - id: 69
    type: ui
    status: implemented
    batch: 4
    description: "Trocar labels do card de Agenda"
    regression_of: null
    related_crs: [29]
    implemented_in: "PLAN_CR4_F006"

  - id: 70
    type: ui
    status: implemented
    batch: 4
    description: "Aumentar icones de edicao/exclusao de atores"
    regression_of: null
    related_crs: [26]
    implemented_in: "PLAN_CR4_F006"

  - id: 71
    type: feature
    status: implemented
    batch: 4
    description: "Remover regra de que ator que dirige tambem pode presidir"
    regression_of: null
    related_crs: [26, 72]
    implemented_in: "PLAN_CR4_F008"

  - id: 72
    type: feature
    status: implemented
    batch: 4
    description: "Bispado cadastrado como usuario deve ter nomes adicionados como atores"
    regression_of: null
    related_crs: [26, 71]
    implemented_in: "PLAN_CR4_F008"

  - id: 73
    type: bug
    status: implemented
    batch: 4
    description: "Campo Reconhecendo a Presenca deve mostrar lista de atores"
    regression_of: null
    related_crs: [26]
    implemented_in: "PLAN_CR4_F008"

  - id: 74
    type: feature
    status: implemented
    batch: 4
    description: "Oracao de abertura e fechamento pode ter nome diferente dos membros"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR4_F008"

  - id: 75
    type: feature
    status: implemented
    batch: 4
    description: "Domingos sem agenda devem aparecer com card nao-expansivel"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_CR4_F008"

  # ============================================================
  # BATCH 5 (CRs 76-82)
  # ============================================================
  - id: 76
    type: bug
    status: implemented
    batch: 5
    description: "Regressao CR-64 - Tela de Usuarios erro 'Edge Function returned non-2xx status code'"
    regression_of: 64
    related_crs: [64, 23]
    implemented_in: "manual"

  - id: 77
    type: bug
    status: implemented
    batch: 5
    description: "Regressao CR-66 - Exportar CSV com lista vazia mostra erro (cacheDirectory null)"
    regression_of: 66
    related_crs: [42, 54, 66, 78]
    implemented_in: "project_CR77_CR78_CR82"

  - id: 78
    type: bug
    status: implemented
    batch: 5
    description: "Regressao CR-66 - Importar CSV da erro (EncodingType undefined)"
    regression_of: 66
    related_crs: [42, 54, 66, 77]
    implemented_in: "project_CR77_CR78_CR82"

  - id: 79
    type: bug
    status: implemented
    batch: 5
    description: "Tela de Usuarios sem botao de voltar"
    regression_of: null
    related_crs: [33, 64]
    implemented_in: "manual"

  - id: 80
    type: ux
    status: implemented
    batch: 5
    description: "Tela de Membros precisa de textos explicativos (i18n pt/en/es)"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P010"

  - id: 81
    type: feature
    status: implemented
    batch: 5
    description: "Campo Nome para usuario (auto-ator dirigir/presidir, logs amigaveis, tela usuarios)"
    regression_of: null
    related_crs: [72]
    implemented_in: "manual"

  - id: 82
    type: bug
    status: implemented
    batch: 5
    description: "GestureDetector must be descendant of GestureHandlerRootView"
    regression_of: null
    related_crs: []
    implemented_in: "project_CR77_CR78_CR82"

  # ============================================================
  # BATCH 6 (CRs 83-90)
  # ============================================================
  - id: 83
    type: ux
    status: implemented
    batch: 6
    description: "Membros e temas da ala: salvar somente ao clicar Salvar, adicionar botão Cancelar"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P011"

  - id: 84
    type: ux
    status: implemented
    batch: 6
    description: "Adicionar botão X para limpar campo de search em todos os campos de busca do app"
    regression_of: null
    related_crs: [39]
    implemented_in: "PLAN_P011"

  - id: 85
    type: bug
    status: implemented
    batch: 6
    description: "Lista de códigos internacionais de telefone incompleta, faltam muitos países"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P011"

  - id: 86
    type: ux
    status: implemented
    batch: 6
    description: "Diálogo de confirmação antes de Importar CSV avisando que substitui lista de membros e não mexe em designações"
    regression_of: null
    related_crs: [42, 54, 66, 77, 78]
    implemented_in: "PLAN_P011"

  - id: 87
    type: ui
    status: implemented
    batch: 6
    description: "Trocar texto Editar/Excluir nos botões de swipe por ícones de lápis e lixeira"
    regression_of: null
    related_crs: [70]
    implemented_in: "PLAN_P012"

  - id: 88
    type: ux
    status: implemented
    batch: 6
    description: "Tela de temas: adicionar texto explicativo sobre a tela e sobre ativar/desativar coleções"
    regression_of: null
    related_crs: [80]
    implemented_in: "PLAN_P012"

  - id: 89
    type: feature
    status: implemented
    batch: 6
    description: "Ao clicar numa coleção de temas, mostrar lista read-only com todos os temas da coleção"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P012"

  - id: 90
    type: bug
    status: implemented
    batch: 6
    description: "Botão de excluir para membros e temas da ala não faz nada"
    regression_of: null
    related_crs: [83]
    implemented_in: "PLAN_P011"

  # ============================================================
  # BATCH 7 (CRs 91-100)
  # ============================================================
  - id: 91
    type: bug_critical
    status: implemented
    batch: 7
    description: "Erro RLS policy ao designar orador: 'new row violates row-level security policy for table notification_queue' - mostra diálogo de erro ao usuário"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P013"

  - id: 92
    type: bug
    status: implemented
    batch: 7
    description: "Duplicate key error no dropdown de países: 'Encountered two children with the same key' no MemberEditor"
    regression_of: null
    related_crs: [85]
    implemented_in: "PLAN_P013"

  - id: 93
    type: bug
    status: implemented
    batch: 7
    description: "Deep link protocol deve ser sacrmeetman:// ao invés de wardmanager://"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P013"

  - id: 94
    type: ui
    status: implemented
    batch: 7
    description: "Trocar template padrão de convite WhatsApp para incluir posição do discurso, tema e link"
    regression_of: null
    related_crs: [14, 63]
    implemented_in: "PLAN_P014"

  - id: 95
    type: bug
    status: implemented
    batch: 7
    description: "Ao mudar tipo de domingo de 'Discursos' para outro, campos de designação de discursantes e temas não somem"
    regression_of: null
    related_crs: [6, 7, 56]
    implemented_in: "PLAN_P013"

  - id: 96
    type: ux
    status: implemented
    batch: 7
    description: "Campos de busca (membros, temas, atores) devem ser fixos no topo e preencher espaço disponível, com botão fechar à direita"
    regression_of: null
    related_crs: [39, 84]
    implemented_in: "PLAN_P014"

  - id: 97
    type: feature
    status: implemented
    batch: 7
    description: "Campo 'Reconhecendo a Presença' deve permitir seleção múltipla de nomes"
    regression_of: null
    related_crs: [73]
    implemented_in: "PLAN_P014"

  - id: 98
    type: bug
    status: implemented
    batch: 7
    description: "Campos de oração de abertura e fechamento não são clicáveis - clicar não faz nada"
    regression_of: null
    related_crs: [74]
    implemented_in: "PLAN_P013"

  - id: 99
    type: ui
    status: implemented
    batch: 7
    description: "Trocar labels dos discursos na edição de agenda: '1o Orador' → '1o Discurso' (idem 2o e 3o)"
    regression_of: null
    related_crs: [29, 69]
    implemented_in: "PLAN_P014"

  - id: 100
    type: feature
    status: implemented
    batch: 7
    description: "Campo de discursante read-only com ícone de edição para 'Troca de Última Hora' - campo texto manual, ícone X para reverter ao designado original"
    regression_of: null
    related_crs: [26]
    implemented_in: "PLAN_P014"

  # ============================================================
  # BATCH 8 (CRs 101-111)
  # ============================================================
  - id: 101
    type: bug
    status: implemented
    batch: 8
    description: "Na aba discursos (e no Home), quando o domingo é sem discursos, não esconder os 3 LEDs de status"
    regression_of: null
    related_crs: [7, 56]
    implemented_in: "PLAN_P015"

  - id: 102
    type: ui
    status: implemented
    batch: 8
    description: "Na aba agenda, não mostrar label amarelo no card contraído quando o domingo for domingo de discursos"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P015"

  - id: 103
    type: bug
    status: implemented
    batch: 8
    description: "Template WhatsApp correto em whatsappUtils.ts mas aba de configurações mostra template antigo no campo"
    regression_of: null
    related_crs: [14, 63, 94]
    implemented_in: "PLAN_P015"

  - id: 104
    type: bug
    status: implemented
    batch: 8
    description: "Template WhatsApp ao clicar botão vem sem aspas ao redor do título, sem nome da coleção e sem o link"
    regression_of: null
    related_crs: [14, 63, 94]
    implemented_in: "PLAN_P015"

  - id: 105
    type: ui
    status: implemented
    batch: 8
    description: "Na sessão de gerenciamento de convites, trocar botão texto 'WhatsApp' pelo ícone do WhatsApp e ícone de status por algo como três pontinhos"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P016"

  - id: 106
    type: ux
    status: implemented
    batch: 8
    description: "Na sessão de gerenciamento de convites, trocar Alert por dropdown personalizado com opções: Ver conversa (ícone WhatsApp), Designado/Confirmado (LED verde), Designado/Não-Convidado (LED novo), Desistiu (LED vermelho), Cancelar (X)"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P016"

  - id: 107
    type: ui
    status: implemented
    batch: 8
    description: "Na sessão de gerenciamento de convites, segunda linha do label: '1o Discurso - <led> <nome do status>'"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P016"

  - id: 108
    type: bug
    status: implemented
    batch: 8
    description: "Na sessão de gerenciamento de convites, placeholder {data} coloca '22 FEV', trocar para data formatada de acordo com localização da ala"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P015"

  - id: 109
    type: bug
    status: implemented
    batch: 8
    description: "Na sessão Próximas Designações do Home, card não expande para ver os 3 discursos quando domingo é de discursos"
    regression_of: null
    related_crs: [75]
    implemented_in: "PLAN_P015"

  - id: 110
    type: feature
    status: implemented
    batch: 8
    description: "Na sessão de gerenciamento de convites, mostrar a sessão para o bispado também"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P016"

  - id: 111
    type: ux
    status: implemented
    batch: 8
    description: "No card de convites expandido, aumentar espaço entre LED e X e aumentar ícone do X para melhorar visualização e toque"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P016"

  # ============================================================
  # BATCH 9 (CRs 112-125)
  # ============================================================
  - id: 112
    type: bug
    status: implemented
    batch: 9
    description: "Ver Conversa no gerenciador de convites deve abrir WhatsApp na conversa sem reenviar o convite"
    regression_of: null
    related_crs: [106]
    implemented_in: "PLAN_P017"

  - id: 113
    type: ui
    status: implemented
    batch: 9
    description: "No diálogo de trocar status do convite (3 pontinhos), título deve ser 'Alterar status' com i18n ao invés do nome da pessoa"
    regression_of: null
    related_crs: [106]
    implemented_in: "PLAN_P017"

  - id: 114
    type: ux
    status: implemented
    batch: 9
    description: "Adicionar X ao lado do campo de temas para poder remover o tema selecionado"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P018"

  - id: 115
    type: ux
    status: implemented
    batch: 9
    description: "Ao selecionar opção diferente de 'Domingo com Discursos' com discursantes/temas existentes, abrir diálogo de confirmação antes de apagar"
    regression_of: null
    related_crs: [6, 7, 56, 95]
    implemented_in: "PLAN_P018"

  - id: 116
    type: feature
    status: implemented
    batch: 9
    description: "Ao clicar no LED de status do convite, mostrar também as opções 'confirmado' e 'desistiu'"
    regression_of: null
    related_crs: [106]
    implemented_in: "PLAN_P018"

  - id: 117
    type: bug
    status: implemented
    batch: 9
    description: "Telefone +1 mostra bandeira do Canadá ao invés de EUA, clicar em EUA não corrige o ícone"
    regression_of: null
    related_crs: [85, 92]
    implemented_in: "PLAN_P017"

  - id: 118
    type: ux
    status: implemented
    batch: 9
    description: "Nas telas de Search (membros, temas, atores), campo de busca com tamanho fixo preenchendo todo espaço disponível com botão fechar à direita"
    regression_of: null
    related_crs: [96]
    implemented_in: "PLAN_P019"

  - id: 119
    type: ui
    status: implemented
    batch: 9
    description: "Redesign dos cards de designação de discursos (mesmo componente para aba discursos e home): LED à esquerda do nome, X à direita (só com seleção), início do campo tema/discursante alinhados, secretário/observador não vê X"
    regression_of: null
    related_crs: [100]
    implemented_in: "PLAN_P018"

  - id: 120
    type: ux
    status: implemented
    batch: 9
    description: "Ao expandir qualquer card, scroll automático para mostrar card inteiro. Se card maior que tela, alinhar topo do card com topo da tela"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P019"

  - id: 121
    type: feature
    status: implemented
    batch: 9
    description: "Ao fazer designação de última hora na agenda, adicionar '(Designação de última hora)' após o label do discurso"
    regression_of: null
    related_crs: [100]
    implemented_in: "PLAN_P018"

  - id: 122
    type: ui
    status: implemented
    batch: 9
    description: "Trocar label '3o Discurso' para 'Último Discurso' na agenda"
    regression_of: null
    related_crs: [99]
    implemented_in: "PLAN_P017"

  - id: 123
    type: ui
    status: implemented
    batch: 9
    description: "Campo 'Reconhecendo a Presença' com tamanho proporcional ao número de atores selecionados, um ator por linha"
    regression_of: null
    related_crs: [97]
    implemented_in: "PLAN_P019"

  - id: 124
    type: feature
    status: implemented
    batch: 9
    description: "Campos 'Oração de abertura' e 'Oração de encerramento' devem permitir nome customizado além da lista de membros, sem adicionar como membro"
    regression_of: null
    related_crs: [74, 98]
    implemented_in: "already_implemented"

  - id: 125
    type: bug_critical
    status: implemented
    batch: 9
    description: "Bug no campo 'Oração de encerramento': ao clicar, duplica o campo e o número de telas de search"
    regression_of: null
    related_crs: [74, 98]
    implemented_in: "PLAN_P017"

  # ============================================================
  # BATCH 10 (CRs 126-133)
  # ============================================================
  - id: 126
    type: ui
    status: implemented
    batch: 10
    description: "Redesign LEDs: círculo plano (flat) sem efeito 3D. Cores: Não designado=Cinza, Designado/Não-Convidado=Laranja, Designado/Convidado=Amarelo, Confirmado=Verde, Desistiu=Vinho Escuro"
    regression_of: null
    related_crs: [105, 106, 107]
    implemented_in: "PLAN_P020"

  - id: 127
    type: bug_critical
    status: implemented
    batch: 10
    description: "Ao mudar tipo de domingo de 'Discursos' para outro e confirmar no diálogo, as designações de pessoas e temas desse domingo não são apagadas do banco de dados"
    regression_of: 115
    related_crs: [6, 7, 56, 95, 115]
    implemented_in: "PLAN_P020"

  - id: 128
    type: ui
    status: implemented
    batch: 10
    description: "Botão X para apagar tema está dentro do dropdown, deveria estar fora do campo à direita (igual ao X de discursante)"
    regression_of: null
    related_crs: [114]
    implemented_in: "PLAN_P021"

  - id: 129
    type: feature
    status: implemented
    batch: 10
    description: "Ao clicar no LED de um discurso, mostrar todas as opções de status exceto 'não designado'"
    regression_of: 116
    related_crs: [106, 116]
    implemented_in: "PLAN_P020"

  - id: 130
    type: bug
    status: implemented
    batch: 10
    description: "Country code US/Canada: ao selecionar Canada com US selecionado não troca; ao selecionar Canada com outro país selecionado mostra US. Problema na exibição da seleção no campo"
    regression_of: 117
    related_crs: [85, 92, 117]
    implemented_in: "PLAN_P020"

  - id: 131
    type: ui
    status: implemented
    batch: 10
    description: "Campo de search do seletor de hinos muito estreito comparado com search de temas e membros. Aumentar para ficar igual"
    regression_of: 118
    related_crs: [96, 118]
    implemented_in: "PLAN_P021"

  - id: 132
    type: ux
    status: implemented
    batch: 10
    description: "Ao expandir card da agenda, scroll automático para alinhar topo do card com topo da tela"
    regression_of: 120
    related_crs: [120]
    implemented_in: "PLAN_P021"

  - id: 133
    type: feature
    status: implemented
    batch: 10
    description: "Campos 'Oração de abertura' e 'Oração de encerramento' devem permitir nome customizado sem adicionar como membro, nome fica só naquele campo"
    regression_of: 124
    related_crs: [74, 98, 124, 125]
    implemented_in: "PLAN_P021"

  # ============================================================
  # BATCH 11 (CRs 134-138)
  # ============================================================
  - id: 134
    type: bug
    status: implemented
    batch: 11
    description: "Trocar status de convite (Home e Discursos) deve mostrar todas opções exceto status atual e 'não designado'. Não resolvido no batch anterior"
    regression_of: 129
    related_crs: [106, 116, 129]
    implemented_in: "PLAN_P022"

  - id: 135
    type: ui
    status: implemented
    batch: 11
    description: "Trocar texto de ajuda de nome personalizado: 'Digite um nome para usar nome personalizado' para 'Para escolher um não membro, digite o nome da pessoa e adicione como nome personalizado'"
    regression_of: null
    related_crs: [74, 124, 133]
    implemented_in: "PLAN_P022"

  - id: 136
    type: bug
    status: implemented
    batch: 11
    description: "Ao clicar pela primeira vez na aba Agenda, próximo domingo deve aparecer no meio da tela. Atualmente mostra de mais de 6 meses atrás"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P022"

  - id: 137
    type: ux
    status: implemented
    batch: 11
    description: "Usabilidade da lista 'Reconhecendo a Presença': adicionar marca de check como checkbox para de-selecionar, ao invés de depender do X que confunde o usuário"
    regression_of: null
    related_crs: [97, 123]
    implemented_in: "PLAN_P022"

  - id: 138
    type: ui
    status: implemented
    batch: 11
    description: "Trocar texto de confirmação de exclusão de ator para 'Tem certeza que deseja excluir essa pessoa da lista de pessoas que podem ser escolhidas para serem reconhecidas durante a Reunião Sacramental?' em todas as línguas"
    regression_of: null
    related_crs: [73, 97]
    implemented_in: "PLAN_P022"

  # ============================================================
  # BATCH 12 (CRs 139)
  # ============================================================
  - id: 139
    type: feature
    status: implemented
    batch: 12
    description: "Adicionar testes de integração ao projeto. O projeto só tem testes unitários, precisamos de testes de integração antes de publicar"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P023"

  # ============================================================
  # BATCH 13 (CRs 140-144)
  # ============================================================
  - id: 140
    type: ui
    status: implemented
    batch: 13
    description: "Renomear opções da aba Configurações: Membros→Discursantes, Temas→Biblioteca de Temas, Usuários→Usuários do App, Histórico→Histórico de Uso, Tema→Tema Claro/Escuro. Todas com suporte i18n"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P024"

  - id: 141
    type: feature
    status: implemented
    batch: 13
    description: "Adicionar seletor de tipo de Domingo como primeiro campo do card de Agenda (igual aba Discursos). Se trocar de Discursos para outro tipo, mostrar diálogo de confirmação e apagar designações"
    regression_of: null
    related_crs: [6, 7, 56, 95, 115, 127]
    implemented_in: "PLAN_P024"

  - id: 142
    type: ux
    status: implemented
    batch: 13
    description: "Revisão completa das entradas do histórico de atividades: todos os placeholders com texto amigável, i18n, nova lista de tipos de eventos com mensagens específicas"
    regression_of: null
    related_crs: [22]
    implemented_in: "PLAN_P024"

  - id: 143
    type: bug
    status: implemented
    batch: 13
    description: "Otimização de query performance Supabase: pg_timezone_names com 0% cache hit rate, considerar lista estática de timezones"
    regression_of: null
    related_crs: [41]
    implemented_in: "PLAN_P024"

  - id: 144
    type: bug
    status: implemented
    batch: 13
    description: "Correções de segurança Supabase: 7 funções sem search_path fixo (update_updated_at_column, ward_id, list_ward_users, create_weekly_reminders, enqueue_speech_notification, delete_old_activity_log, import_members) e habilitar proteção contra senhas vazadas"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P024"

  # ============================================================
  # BATCH 14 (CRs 145-153)
  # ============================================================
  - id: 145
    type: bug
    status: implemented
    batch: 14
    description: "Email de 'Esqueci minha senha' sem referência ao app (mostra Supabase) e link aponta para localhost. Customizar template e redirect URL"
    regression_of: null
    related_crs: [67]
    implemented_in: "PLAN_P025"

  - id: 146
    type: ux
    status: implemented
    batch: 14
    description: "App offline mostra mensagem horrível de conexão perdida em todas as sessões. Melhorar comportamento quando sem conexão"
    regression_of: null
    related_crs: [52, 53]
    implemented_in: "PLAN_P025"

  - id: 147
    type: ui
    status: implemented
    batch: 14
    description: "Banner de offline difícil de ler no iPhone"
    regression_of: null
    related_crs: [146]
    implemented_in: "PLAN_P025"

  - id: 148
    type: ui
    status: implemented
    batch: 14
    description: "Trocar mensagem de alerta ao mudar tipo de domingo com discursantes designados para texto mais específico com i18n em todas as línguas"
    regression_of: null
    related_crs: [6, 7, 56, 95, 115, 127]
    implemented_in: "PLAN_P025"

  - id: 149
    type: feature
    status: implemented
    batch: 14
    description: "Botão 'Iniciar Reunião Sacramental' sempre visível. Regra de data: Seg-Sáb mostra próximo domingo, Domingo mostra dia atual"
    regression_of: null
    related_crs: [1, 3]
    implemented_in: "PLAN_P025"

  - id: 150
    type: ui
    status: implemented
    batch: 14
    description: "Layout dos cards de designações contraídos (Home e Discursos): mostrar nomes dos 3 discursantes (um por linha, '{N}º Discurso: <nome>') e LEDs verticais alinhados à direita. Esconder ao expandir. Linhas vazias mantidas para alinhamento"
    regression_of: null
    related_crs: [101, 119]
    implemented_in: "PLAN_P026"

  - id: 151
    type: feature
    status: implemented
    batch: 14
    description: "Campos Pianista e Regente na agenda (sessão Boas-Vindas), mapeiam para atores de música. Posição: Pianista, Regente, Hino de Abertura"
    regression_of: null
    related_crs: [73]
    implemented_in: "PLAN_P026"

  - id: 152
    type: feature
    status: implemented
    batch: 14
    description: "Toggle para Hino Intermediário na agenda. Auto-desligado e escondido quando apresentação especial está ligada ou reunião de testemunho/primária. Caso contrário, mostrado e ligado por padrão"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P026"

  - id: 153
    type: ui
    status: implemented
    batch: 14
    description: "Layout dos cards de agenda contraídos com linhas de status: Falta (Presidir|Dirigir|Pianista|Regente), Discursantes X/3, Oradores Y/2, Hinos Z/W. Para exceções não-discursos, mostrar texto da exceção em amarelo"
    regression_of: null
    related_crs: [102]
    implemented_in: "PLAN_P026"

  # ============================================================
  # BATCH 15 (CRs 154+)
  # ============================================================
  - id: 154
    type: feature
    status: pending
    batch: 15
    description: "Importação de membros via PDF do diretório da igreja: parser de PDF + IA para resolver telefones incompletos + validação com libphonenumber. Opção adicional ao CSV existente"
    regression_of: null
    related_crs: [42, 54, 66, 77, 78, 85, 86]
    implemented_in: null

  - id: 155
    type: feature
    status: implemented
    batch: 15
    description: "Email de 'Esqueci minha senha' em 3 idiomas (pt-BR/en/es) via Edge Function. Template customizado com branding do app, detectando idioma da ala do usuário"
    regression_of: null
    related_crs: [67, 145]
    implemented_in: "PLAN_P028"

  - id: 156
    type: ui
    status: implemented
    batch: 15
    description: "Tela de apresentação: seta para baixo em cards acima do expandido, seta para cima em cards abaixo do expandido, sem seta no card expandido"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P027"

  - id: 157
    type: ui
    status: implemented
    batch: 15
    description: "Tela de apresentação: 'Reconhecendo a Presença' com um nome por linha"
    regression_of: null
    related_crs: [97, 123]
    implemented_in: "PLAN_P027"

  - id: 158
    type: feature
    status: implemented
    batch: 15
    description: "Tela de apresentação: botão toggle de tamanho de fonte (normal e grande) ao lado do botão fechar. Fonte grande significativamente maior para pessoas com problema de vista"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P027"

  - id: 159
    type: ui
    status: implemented
    batch: 15
    description: "Tela de apresentação: títulos de cada seção iguais aos do card de domingo na aba agenda (ex: 'Boas-Vindas, Anúncios e Reconhecimentos')"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P027"

  - id: 160
    type: ui
    status: implemented
    batch: 15
    description: "Somente na aba Agenda mostrar 'Último Discurso' para posição 3. Na aba Discursos, mostrar '3º Discurso'"
    regression_of: null
    related_crs: [99, 122]
    implemented_in: "PLAN_P027"

  - id: 161
    type: ui
    status: implemented
    batch: 15
    description: "Card contraído de discursos: mover círculos de status da direita para antes do label. Formato: '<círculo> 1º Discurso: <nome>'. Aumentar fonte, espaçamento entre linhas, reduzir tamanho do círculo. Sem designação mostra só o círculo"
    regression_of: null
    related_crs: [101, 119, 150]
    implemented_in: "PLAN_P027"

  - id: 162
    type: ui
    status: implemented
    batch: 15
    description: "Card expandido de discursos: mover círculo de status para linha do label '{N}º Discurso', alinhado à direita. Formato: '<status por extenso> <círculo>'. Campos de discursante e tema ocupam toda a linha"
    regression_of: null
    related_crs: [119]
    implemented_in: "PLAN_P027"

  - id: 163
    type: ui
    status: implemented
    batch: 15
    description: "Trocar placeholder 'Selecionar Orador' para 'Selecionar Discursante' em todas as línguas (pt-BR, en, es)"
    regression_of: null
    related_crs: [99]
    implemented_in: "PLAN_P027"

  - id: 164
    type: bug
    status: implemented
    batch: 15
    description: "Rodar todos os testes (unit e integration) e garantir que 100% passam. Corrigir falhas encontradas"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P028"

  # ============================================================
  # BATCH 16 (CRs 165-171)
  # ============================================================
  - id: 165
    type: ui
    status: implemented
    batch: 16
    description: "Card de discursos expandido: alinhar verticalmente círculo de status com X de remover designação (trazer círculo e texto do status um pouco para a esquerda)"
    regression_of: null
    related_crs: [119, 162]
    implemented_in: "PLAN_P029"

  - id: 166
    type: ui
    status: implemented
    batch: 16
    description: "Tela 'Iniciar Reunião Sacramental': (1) trocar título para 'Reunião Sacramental' (2) título não muda de tamanho quando usuário clica no botão de aumentar fonte"
    regression_of: null
    related_crs: [158]
    implemented_in: "PLAN_P029"

  - id: 167
    type: bug
    status: implemented
    batch: 16
    description: "4 seções da agenda em português sem acentos e cedilha. Correto: 'Boas-Vindas, Anúncios e Reconhecimentos', 'Designações e Sacramento', 'Primeiros Discursos', 'Último Discurso'"
    regression_of: null
    related_crs: [29, 69, 159]
    implemented_in: "PLAN_P029"

  - id: 168
    type: ux
    status: implemented
    batch: 16
    description: "Aumentar área clicável do botão Voltar nos cards dentro da aba Configurações. Área atual muito pequena, difícil de clicar"
    regression_of: null
    related_crs: [33]
    implemented_in: "PLAN_P029"

  - id: 169
    type: ui
    status: implemented
    batch: 16
    description: "Igualar tamanho e distância entre ícones de status nos cards fechados (Home e Discursos). Círculo piscante parece maior ou com distância diferente dos outros"
    regression_of: null
    related_crs: [126, 150, 161]
    implemented_in: "PLAN_P029"

  - id: 170
    type: ui
    status: implemented
    batch: 16
    description: "Tela de apresentação: trocar label 'Último Discurso - Discurso' para 'Último Discurso'"
    regression_of: null
    related_crs: [122, 160]
    implemented_in: "PLAN_P029"

  - id: 171
    type: feature
    status: implemented
    batch: 16
    description: "Cards contraídos de agenda para 'Reunião de Testemunho' e 'Apresentação Especial da Primária': mostrar 4 linhas de status (Falta: Presidir|Dirigir|Pianista|Regente, tipo em amarelo, Orações Y/2, Hinos Z/3)"
    regression_of: null
    related_crs: [102, 153]
    implemented_in: "PLAN_P029"

  # ============================================================
  # BATCH 17 (CRs 172-174)
  # ============================================================
  - id: 172
    type: feature
    status: implemented
    batch: 17
    description: "Quando toggle 'Apoios e Agradecimentos da Estaca' está ligado, na tela de apresentação mostrar subtítulo 'APOIOS E AGRADECIMENTOS DA ESTACA' e texto 'Passar palavra à Estaca'. Todas as línguas (pt-BR/en/es)"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P030"

  - id: 173
    type: ui
    status: implemented
    batch: 17
    description: "No card de domingo para configurar a agenda, trocar label 'Último Discurso - Discurso' para 'Último Discurso'"
    regression_of: null
    related_crs: [122, 160, 170]
    implemented_in: "PLAN_P030"

  - id: 174
    type: ui
    status: implemented
    batch: 17
    description: "No card de domingo dos discursos, alinhar verticalmente o centro do círculo de status com o centro do ícone X para remover designação"
    regression_of: 165
    related_crs: [119, 162, 165]
    implemented_in: "PLAN_P030"

  # ============================================================
  # BATCH 18 (CRs 175-177)
  # ============================================================
  - id: 175
    type: bug
    status: implemented
    batch: 18
    description: "Deep link scheme deve ser sacrmeetplan:// em vez de sacrmeetman://. Trocar em app.json, create-invitation Edge Function e send-reset-email Edge Function. Atualizar Redirect URLs no Supabase Dashboard"
    regression_of: null
    related_crs: [93]
    implemented_in: "PLAN_P031"

  - id: 176
    type: bug
    status: implemented
    batch: 18
    description: "Email de recuperação de senha: botão não é clicável porque email clients bloqueiam custom URL schemes. Criar Edge Function HTTPS intermediária (reset-redirect) que redireciona para o app"
    regression_of: null
    related_crs: [67, 145, 155]
    implemented_in: "PLAN_P031"

  - id: 177
    type: ui
    status: implemented
    batch: 18
    description: "No card expandido de domingo para designação de discursos, alinhar a direita do círculo de status com a direita do campo do nome do discursante"
    regression_of: null
    related_crs: [119, 162, 165, 174]
    implemented_in: "PLAN_P031"

  # ============================================================
  # BATCH 19 (CRs 178-191)
  # ============================================================
  - id: 178
    type: feature
    status: implemented
    batch: 19
    description: "Controle de idioma separado para app (por usuário, salvo no banco) e ala (tabela wards, Bispado/Secretário alteram). Idioma da ala controla template WhatsApp e coleções de temas disponíveis. Idioma do app controla traduções da UI incluindo placeholders. Ao trocar idioma da ala, reabilitar automaticamente coleções: Temas especiais, Força dos jovens, Princípios do evangelho no novo idioma"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P032"

  - id: 179
    type: ux
    status: implemented
    batch: 19
    description: "No card de domingo da agenda, todo campo que não é texto livre nem switch deve ter botão X à direita (pode ser dentro do campo) para apagar valor atual. Todo campo não desabilitado pode ser limpo"
    regression_of: null
    related_crs: [114, 128]
    implemented_in: "PLAN_P033"

  - id: 180
    type: feature
    status: implemented
    batch: 19
    description: "Dividir tipo de ator 'Música' em 'Pianista' e 'Regente'. Pianista selecionado/criado/editado/apagado no campo pianista, Regente no campo regente. Migração: todos atores tipo Música viram Pianista. Designações existentes de Regente mantêm o ator (agora tipo Pianista)"
    regression_of: null
    related_crs: [151]
    implemented_in: "PLAN_P032"

  - id: 181
    type: feature
    status: implemented
    batch: 19
    description: "2º discurso opcional por domingo via toggle pequeno após label '2º Discurso'. Desligado: campos desabilitados, apaga designações com confirmação, card contraído sem linha do 2º discurso. Na agenda: campo desabilitado com placeholder 'Domingo configurado para não ter 2º discurso'. Default: ligado. Independente do toggle: trocar '3º Discurso' para 'Último Discurso' no card, remover labels 1º/2º/3º do card contraído (Home e Discursos). Na apresentação: seção 'Primeiros Discursos' não mostra nada sobre 2º discurso quando desligado"
    regression_of: null
    related_crs: [4, 99, 122, 160]
    implemented_in: "PLAN_P032"

  - id: 182
    type: ux
    status: implemented
    batch: 19
    description: "Remover edição de discursos do card de agenda. Campos de discursantes mostram nome mas são indisponíveis para edição. À direita de cada campo, botão com ícone de lápis que leva para aba Discursos com card do domingo expandido"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P033"

  - id: 183
    type: ui
    status: implemented
    batch: 19
    description: "No Home, trocar 'Próximas Designações' para 'Próximos Discursos' em todas as línguas (pt-BR, en, es)"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P033"

  - id: 184
    type: feature
    status: implemented
    batch: 19
    description: "Na tela 'Iniciar Reunião Sacramental', adicionar ícone de lápis ao lado do ícone de tamanho de fonte para edição da agenda. Ao clicar, leva para aba Agenda com card aberto para edição"
    regression_of: null
    related_crs: [158]
    implemented_in: "PLAN_P034"

  - id: 185
    type: feature
    status: implemented
    batch: 19
    description: "No card expandido da agenda, no topo ao lado da seta de colapsar, adicionar botão play que leva para tela 'Iniciar Reunião Sacramental' com o domingo selecionado"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P034"

  - id: 186
    type: feature
    status: implemented
    batch: 19
    description: "Home - sessão 'Agenda da Reunião Sacramental': abaixo do botão Iniciar, card de domingo idêntico ao contraído da aba Agendas (não expansível). Card do próximo domingo (seg-sáb) ou do dia (domingo). À direita, botão quadrado com lápis para editar na aba Agenda. Botão Iniciar ganha ícone de play antes da palavra"
    regression_of: null
    related_crs: [149]
    implemented_in: "PLAN_P034"

  - id: 187
    type: ui
    status: implemented
    batch: 19
    description: "Trocar nome da aba 'Agenda' para 'Agendas' em todas as línguas"
    regression_of: null
    related_crs: []
    implemented_in: "PLAN_P033"

  - id: 188
    type: ux
    status: implemented
    batch: 19
    description: "Home - sessão 'Próximos Discursos': cards não são mais expansíveis. Cada card tem botão à direita com ícone de lápis (idêntico ao de CR-186) que leva para aba Discursos com card aberto para edição"
    regression_of: null
    related_crs: [150]
    implemented_in: "PLAN_P034"

  - id: 189
    type: bug
    status: implemented
    batch: 19
    description: "No card de discursos, ícones X que limpam designação estão deslocados. Centro do ícone deve alinhar horizontalmente com centro do campo de seleção do discursante (e X do tema alinhado ao tema)"
    regression_of: null
    related_crs: [119, 162, 165, 174]
    implemented_in: "PLAN_P033"

  - id: 190
    type: ux
    status: pending
    batch: null
    description: "Explorar suporte a fontes maiores do sistema (accessibility). Textos cortados quando usuário configura fontes maiores no celular. Avaliar se há solução fácil para quebra de linha. Se fácil, implementar; senão, documentar para batch futuro"
    regression_of: null
    related_crs: []
    implemented_in: null

  - id: 191
    type: bug
    status: implemented
    batch: 19
    description: "Botão 'Redefinir Senha' no email de recuperação (Gmail→Safari) mostra HTML como plain-text ao invés de renderizar. Possivelmente Edge Function reset-redirect retornando Content-Type incorreto ou HTML escapado"
    regression_of: null
    related_crs: [67, 145, 155, 176]
    implemented_in: "PLAN_P032"

  - id: 192
    type: bug_critical
    status: implemented
    batch: 19
    description: "Push notifications não estão funcionando. Testado com Secretário no iOS (build EAS) e Bispo no Android (build EAS). Ambos possuem permissão de notificação concedida no sistema. Notifications não chegam"
    regression_of: null
    related_crs: [52, 53]
    implemented_in: "PLAN_P033"

  # ============================================================
  # BATCH 20 (CRs 193-200)
  # ============================================================
  - id: 193
    type: ux
    status: implemented
    batch: 20
    description: "Reorganizar aba Configurações em 2 grupos com labels. Grupo 1 'Configurações da Ala': Discursantes, Biblioteca de Temas, Modelo de Convite pelo WhatsApp, Idioma da Ala, Fuso Horário. Grupo 2 'Configurações do App': Usuários do App, Histórico de Uso, Idioma do App, Tema Claro/Escuro, Sobre"
    regression_of: null
    related_crs: [140]
    implemented_in: "PLAN_P036"

  - id: 194
    type: bug
    status: implemented
    batch: 20
    description: "Revisão geral dos papéis dos atores, principalmente nos testes. Verificar problemas de TS, testes que não passam, e inconsistência 'can_conduct' vs 'can_conductor' no código"
    regression_of: null
    related_crs: [180]
    implemented_in: "PLAN_P035"

  - id: 195
    type: bug
    status: implemented
    batch: 20
    description: "Botão de troca de idioma da Ala não funciona. Ao clicar e confirmar, não troca a seleção, não troca idioma das coleções nem do modelo do WhatsApp"
    regression_of: 178
    related_crs: [178]
    implemented_in: "PLAN_P035"

  - id: 196
    type: bug
    status: implemented
    batch: 20
    description: "Funcionalidade de 2º Discurso opcional com múltiplos erros: (4.1) toggle desligado apaga só discursante, deveria apagar tema também; (4.2) aba Discursos card expandido toggle desligado troca campos por mensagem de aviso ao invés de só desativar; (4.3) aba Agendas card expandido sem 2º discurso mostra texto 'Domingo configurado para não ter 2º discurso' no campo desabilitado; (4.4) card contraído de agenda com 2º discurso desabilitado deve mostrar X/2 ao invés de X/3"
    regression_of: 181
    related_crs: [181]
    implemented_in: "PLAN_P035"

  - id: 197
    type: bug
    status: implemented
    batch: 20
    description: "Email de recuperação de senha deve usar idioma do app do usuário, não o idioma da ala"
    regression_of: 155
    related_crs: [155, 178]
    implemented_in: "PLAN_P035"

  - id: 198
    type: bug
    status: implemented
    batch: 20
    description: "Botão de reset de senha no email resulta em HTML estático. Erro no browser: 'Blocked script execution because the document frame is sandboxed and allow-scripts permission is not set'. Edge Function reset-redirect precisa redirecionar sem scripts"
    regression_of: 191
    related_crs: [67, 145, 155, 176, 191]
    implemented_in: "PLAN_P035"

  - id: 199
    type: ui
    status: implemented
    batch: 20
    description: "No card expandido de domingo para designação de discursos, alinhar a direita do círculo de status com a direita do campo do nome do discursante sem mexer com a posição do X ao lado do campo discursante e tema"
    regression_of: 177
    related_crs: [119, 162, 165, 174, 177]
    implemented_in: "PLAN_P036"

  - id: 200
    type: ui
    status: implemented
    batch: 20
    description: "Trocar botão de play usado no botão Iniciar Reunião Sacramental e no card de domingo da agenda por ícone bem maior (altura da fonte). Ícone atual muito pequeno e na agenda está colado na outra seta"
    regression_of: null
    related_crs: [185, 186]
    implemented_in: "PLAN_P036"

  - id: 201
    type: feature
    status: implemented
    batch: null
    description: "Deploy pendente dos ultimos 2 batches: push-notification (Batch 19 F125), send-reset-email (Batch 20 F133), reset-redirect (Batch 20 F134)"
    regression_of: null
    related_crs: [184, 185, 194, 198]
    implemented_in: "deploy-only (no plan)"

  - id: 202
    type: feature
    status: implemented
    batch: 21
    description: "Criar pagina web de reset de senha como Edge Function no Supabase. Substituir redirect por pagina com formulario completo (nova senha) que chama verifyOtp + updateUser direto do browser. Elimina dependencia de deep link sacrmeetplan:// que nao funciona em email clients."
    regression_of: null
    related_crs: [155, 175, 191, 194, 198]
    implemented_in: "PLAN_P037"

  - id: 203
    type: feature
    status: implemented
    batch: 21
    description: "Criar pagina web de aceitar convite como Edge Function no Supabase. Pagina com formulario de registro (nome, senha) que chama register-invited-user direto do browser. Elimina dependencia de deep link sacrmeetplan://invite/ que pode nao funcionar quando compartilhado por email."
    regression_of: null
    related_crs: [155, 175]
    implemented_in: "PLAN_P037"

  # ============================================================
  # BATCH 22 (CRs 204-207)
  # ============================================================
  - id: 204
    type: bug_critical
    status: implemented
    batch: 22
    description: "Reset de senha e convite: pagina web da Edge Function mostra codigo HTML como texto no browser (Safari/Chrome mobile). Causa raiz CONFIRMADA: Supabase sobrescreve Content-Type de text/html para text/plain em respostas GET de Edge Functions que retornam HTML (restricao de seguranca anti-phishing). O curl retorna text/html mas o browser real recebe text/plain. Solucoes possiveis: custom domain (Pro plan), pagina intermediaria em hosting proprio (Vercel/Netlify/GitHub Pages gratis), ou code flow."
    regression_of: 198
    related_crs: [67, 145, 155, 176, 191, 198, 202]
    implemented_in: "PLAN_P039"

  - id: 205
    type: bug
    status: implemented
    batch: 22
    description: "Botao 'Convidar Usuario' retorna erro: ERROR [MutationCache] Error: Edge Function returned a non-2xx status code. Edge Function create-invitation pode nao estar deployada, ou SUPABASE_SERVICE_ROLE_KEY nao configurada, ou token de sessao expirado, ou permissao insuficiente. Erro real mascarado pelo handler generico."
    regression_of: null
    related_crs: [93, 203]
    implemented_in: "PLAN_P038"

  - id: 206
    type: bug
    status: implemented
    batch: 22
    description: "Troca de idioma da ala faz sumir TODAS as colecoes na tela de Temas e template WhatsApp nao troca. Causa raiz: mismatch de codigos de idioma no sistema. O banco de dados (general_collections, ward_collection_config) usa formato locale completo (pt-BR, en-US, es-ES) mas o codigo em diversos pontos usa formato curto (en, es) ou mistura formatos. Fix: funcao toDbLocale() mapeia en->en-US, es->es-ES, pt-BR->pt-BR em useCollections e wardLanguageChangeMutation. Template WhatsApp reseta ao trocar idioma da ala."
    regression_of: 195
    related_crs: [178, 195]
    implemented_in: "PLAN_P038"

  - id: 207
    type: bug
    status: implemented
    batch: 22
    description: "Tela de Template WhatsApp (Configuracoes) desconectada do envio real. A tela le/escreve wards.whatsapp_template no banco, mas InviteManagementSection.tsx passa template='' (hardcoded vazio) e usa getCurrentLanguage() (idioma do app) ao inves de wardLanguage. Resultado: botao WhatsApp sempre usa template default hardcoded, ignorando customizacao do usuario."
    regression_of: null
    related_crs: [178]
    implemented_in: "PLAN_P038"

  - id: 208
    type: bug_critical
    status: implemented
    batch: 22
    description: "Ao clicar em 'Convidar Usuario' recebe erro: Edge Function returned a non-2xx status code. CR-205 melhorou o error handling mas nao resolveu a causa raiz da falha. A Edge Function create-invitation esta retornando erro (401/403/400/500). Investigar e corrigir o motivo real pelo qual o convite falha."
    regression_of: 205
    related_crs: [93, 203, 205]
    implemented_in: "PLAN_P039"
