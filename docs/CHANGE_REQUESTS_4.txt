44. [ARCH DESATUALIZADA] ARCH_M002 não inclui coluna custom_reason na tabela sunday_exceptions (adicionada pelo CR-6). O enum de reason também está desatualizado e não inclui "speeches". Os contracts de MemberImportExport usam tipos web (File, Blob) ao invés da abordagem mobile (expo-document-picker, expo-file-system). O flow "Auto-assign Sunday Types" não esclarece que "speeches" é persistido. O contract de useRealtimeSync não reflete os parâmetros reais. Naming inconsistente (formatFullDate vs formatDateFull) entre ARCH_CR003 e ARCH_CR3_F029. Ordering de sign-out inconsistente entre ARCH_CR003 e ARCH_CR3_F027. Consolidar todas essas correções documentais na ARCH base.
45. [ARCH DESATUALIZADA] ARCH_M002 ainda lista ActorManagementScreen como componente #5 e mostra "Actors" no diagrama do Settings tab. O CR-26 removeu essa tela; atores são gerenciados inline via ActorSelectorDialog nos cards de agenda. Atualizar diagrama e lista de componentes.
46. [ARCH FALTANDO] ARCH_M006 (SyncEngine) e ARCH_M007 (OfflineManager) são definidos como módulos independentes mas não descrevem COMO se integram ao app. Não há definição de onde useRealtimeSync() é chamado, onde useConnection() é chamado, onde OfflineBanner é renderizado, nem como offlineQueue se integra com os hooks de mutation. Adicionar seção de integração com diagrama de fluxo.
47. [ARCH DESATUALIZADA] ARCH_M008 (UIShell) lista apenas 8 componentes mas não inclui as sub-telas de Settings criadas pelos CRs (theme.tsx, about.tsx, history.tsx, timezone.tsx, members.tsx, topics.tsx, whatsapp.tsx, users.tsx). Atualizar com lista completa de componentes e diagrama.
48. [ARCH DESATUALIZADA] ARCH_M004 (AgendaModule) não documenta formatFullDate e dateHeader do Presentation Mode, definidos pelo CR-38. Atualizar o contract do PresentationMode para incluir formatFullDate(dateStr, language).
49. [SPEC DESATUALIZADA] PRODUCT_SPECIFICATION.md não foi atualizado após CRs 6, 26, 29, 30. RF-21 ainda menciona sunday types antigos ("Domingo de Jejum", "Programa Especial", "Sem Reunião"). RF-22 ainda descreve checkboxes para atores. RF-21.3 labels de seção não refletem CR-29/CR-30. Atualizar para refletir o estado atual do produto.
50. [SPEC DESATUALIZADA] As correções docs-only de F025 (CR-31, CR-34, CR-36, CR-37) podem não ter sido executadas nos documentos de entrada. Verificar e aplicar: CR-31 (corrigir ASM-009 no SPEC.final.md), CR-34 (atualizar RF-22/7.13.4 para refletir CR-26), CR-36 (adicionar regra de debounce ao SPEC_F012), CR-37 (atualizar seções 7.8 e 4.2 para refletir permissão do Secretário).
51. [FEATURE FALTANDO] PRODUCT_SPECIFICATION RF-23.1 especifica "pnpm import-hymns hinario.csv" para importar o hinário completo via CLI. O script não existe. Hinos são importados via seed/migration mas não há CLI conforme spec. Criar script e documentar na ARCH.
52. [BUG CRITICO] useRealtimeSync, useConnection e OfflineBanner existem como CÓDIGO MORTO. Nenhum deles é importado ou utilizado em nenhum componente do app. O app NÃO tem sincronização em tempo real (RNF-04 violado) nem detecção de offline (RNF-05 violado). O offlineQueue também existe mas nenhum hook de mutation o utiliza — mutações offline simplesmente falham. Conectar os módulos M006 e M007 ao _layout.tsx e integrar offlineQueue nos hooks de mutation.
53. [BUG CRITICO] useNotifications existe em src/hooks/ mas NÃO é importado em nenhum componente do app. Push tokens nunca são registrados, notificações ao tocar não têm handler. Os DB triggers e a Edge Function process-notifications existem no servidor, mas o lado cliente não está conectado. Push notifications (RF-26 a RF-32) não funcionam. Conectar useNotifications no root _layout.tsx.
54. [BUG] Export CSV mostra alerta de erro quando o usuário cancela o share sheet — deve distinguir cancelamento de erros reais (verificar err?.message !== 'User did not share'). Import CSV tem mensagem de erro hardcoded em inglês ('Failed to read file') ao invés de usar t('members.importFailed').
55. [BUG DE UI] No Members screen, quando canWrite=false, o botão "+" simplesmente não é renderizado mas não há spacer para manter o título centralizado no header. O título desloca para a direita. Adicionar headerSpacer (width 36) conforme prescrito pela ARCH.
56. [BUG CRITICO] O valor "speeches" (Domingo com Discursos) NÃO é persistido no banco de dados. Dois problemas: (a) o CHECK constraint da migration 008 NÃO inclui "speeches" como valor válido, (b) o código em useSundayTypes.ts:185 filtra e NÃO insere domingos do tipo "speeches" no banco (if (type === SUNDAY_TYPE_SPEECHES) return null). O valor "speeches" TEM que ser tratado como qualquer outro tipo de domingo — deve passar no CHECK constraint e deve ser persistido. Criar nova migration adicionando "speeches" ao constraint, remover o filtro do código, e inserir retroativamente registros "speeches" para domingos sem registro.
57. [BUG CRITICO] 17 mutations em 5 hooks (useMembers, useActors, useSpeeches, useTopics, useAgenda, useSundayTypes) NÃO têm callback onError. Quando uma mutation falha (erro de rede, timeout, 500, violação de constraint), o usuário não recebe NENHUM feedback — a falha é silenciosa. TODAS as mutations devem ter onError que mostra Alert.alert com mensagem i18n traduzida nos 3 idiomas. Nunca mostrar stack traces ou mensagens técnicas do Supabase ao usuário.
58. [BUG CRITICO] As 3 tabs principais (Home, Speeches, Agenda) usam queries do TanStack Query mas NÃO verificam o estado de erro (isError/error). Se qualquer query falhar, data é undefined e a UI mostra lista vazia ou pode crashar. Criar componente reutilizável QueryErrorView com mensagem i18n e botão "Tentar novamente" que chama refetch(). Usar em todas as tabs.
59. [BUG] ErrorBoundary e várias funções usam strings de erro hardcoded em inglês: 'Something went wrong', 'An unexpected error occurred', 'Try Again' (ErrorBoundary.tsx), 'WhatsApp is not installed on this device', 'Failed to open WhatsApp' (whatsapp.ts), 'Failed to read file' (members.tsx). Todas devem usar o sistema i18n. ErrorBoundary também deve respeitar o tema (dark/light mode) ao invés de cores hardcoded (#333, #666, #007AFF).
60. [BUG] Existe apenas 1 ErrorBoundary no root layout. Um crash em qualquer componente derruba TODA a aplicação. Adicionar Error Boundaries granulares: um por tab, e em componentes críticos (AgendaForm, SundayCard, PresentationMode). Crash em um card não deve derrubar a lista. Crash em um campo não deve derrubar o formulário. Usar ErrorBoundary atualizado com i18n e tema do CR-59.
61. [BUG] O QueryClient global (src/app/_layout.tsx) não tem error handlers globais, não define timeout adequado, e usa retry:2 genérico. Configurar queryCache e mutationCache com onError para logging centralizado. Definir retry policy: queries retry 2x com backoff exponencial, mutations retry 0x (evitar duplicação), 401/403 não faz retry (redireciona para login). Em __DEV__ mode: console.error com detalhes. Em produção: logging silencioso.
62. No "Sobre", adicionar a mensagem "Esse não é um app oficial da Igreja de Jesus Cristo Dos Santos Dos Últimos Dias". E meu nome tem que ficar como "Aloisio Almeida Jr".
63. [BUG] O texto do template padrão do CR-14 não está sendo respeitado.
64. [BUG] Quando o secretário clica em Usuários na aba Configurações, aparece uma mensagem em vermelho: Erro. A Ala atualmente tem só o secretário de usuário e ele não apareceu na lista de usuários.
65. Está estranho o uso dos toggle para ativar temas. A gente aperta para ativar e demora segundos para ele realmente ir. Não espere a persistencia. Faça o toggle trocar instantâneo e solte a persistencia de forma assincrona.
66. [BUG] Botão Exportar CSV nÃo faz nada quando não há membros, ele deveria fazer download do arquivo com os cabeçalhos. Tentei importar um CSV. Mas eler retorna um dialogo aleatório com erro e eu não faço ideia do que está errado.
67. Implementar a funcionalidade "Esqueci a senha".
68. [BUG] Num domingo com discursos, se eu clico em outra opção, ele seleciona, mas 2 segundos depois, volta para a opção antiga.
69. Trocar alguns labels do card de Agenda. Conduzindo -> Dirigindo. Assuntos da Ala -> Apoios e Agredecimentos. Anúncios de Estaca -> Apoios e Agredecimentos da Estaca. Reconhecendo -> Reconhecendo a Presença.
70. Aumentar o tamanho e espaço que ocupa dos ícones de edição e exclusão dos atores.
71. Por simplicidade, remova a regra de que "O ator de dirige a reunião, também pode presidir". Então quando eu adicionar alguém para dirigir, nÃo automaticamente selecione como presidir.
72. O bispado, quando cadastrado como usuário, devem ter seus nomes adicionados automaticamente como atores, podendo dirigir e presidir.
73. [BUG] O campo Reconhecendo a Presença também é ligada aos atores, quando clicada deve mostrar a lista de atores para esse campo.
74. O campo oração de abertura e oração de fechamento pode permitir adicionar um nome diferente dos membros da ala. Ele nome não precisa ser persistido como membro da ala, só persiste naquele campo da agenda.
75. Na agenda, domingos sem agenda devem aparecer tambem. Use um card que não se expande e, da mesma forma que os de reunião de testemunho, mostre a exceção em amarelo.
